import{E,F as N,G as O,b as v,r as x,j as t,e as z,f as F,g as U,s as w,u as D,a as A,m as R,x as I,d as L,H as V,J as H,P as X,l as G,p as S,t as J}from"./index-BpN6Oh9O.js";import{a as q,b as K,c as Q}from"./userApi-Ccq9lOMB.js";import{B as b,T as f,a as k,e as Y,F as Z,S as _}from"./TextField-BCWqjyrI.js";import{g as ee,A as te,f as ae,h as se,D as P,e as oe}from"./index-DgKuPVcZ.js";import{S as ie,M as W}from"./MenuItem-BQD6jSC8.js";const ne=E();function re({props:e,name:a,defaultTheme:s,themeId:r}){let l=N(s);return r&&(l=l[r]||l),ee({theme:l,name:a,props:e})}const le=O(),ce=ne("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,a)=>{const{ownerState:s}=e;return[a.root,a[`maxWidth${v(String(s.maxWidth))}`],s.fixed&&a.fixed,s.disableGutters&&a.disableGutters]}}),de=e=>re({props:e,name:"MuiContainer",defaultTheme:le}),ue=(e,a)=>{const s=c=>U(a,c),{classes:r,fixed:l,disableGutters:p,maxWidth:o}=e,i={root:["root",o&&`maxWidth${v(String(o))}`,l&&"fixed",p&&"disableGutters"]};return F(i,s,r)};function pe(e={}){const{createStyledComponent:a=ce,useThemeProps:s=de,componentName:r="MuiContainer"}=e,l=a(({theme:o,ownerState:i})=>({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",...!i.disableGutters&&{paddingLeft:o.spacing(2),paddingRight:o.spacing(2),[o.breakpoints.up("sm")]:{paddingLeft:o.spacing(3),paddingRight:o.spacing(3)}}}),({theme:o,ownerState:i})=>i.fixed&&Object.keys(o.breakpoints.values).reduce((c,h)=>{const g=h,d=o.breakpoints.values[g];return d!==0&&(c[o.breakpoints.up(g)]={maxWidth:`${d}${o.breakpoints.unit}`}),c},{}),({theme:o,ownerState:i})=>({...i.maxWidth==="xs"&&{[o.breakpoints.up("xs")]:{maxWidth:Math.max(o.breakpoints.values.xs,444)}},...i.maxWidth&&i.maxWidth!=="xs"&&{[o.breakpoints.up(i.maxWidth)]:{maxWidth:`${o.breakpoints.values[i.maxWidth]}${o.breakpoints.unit}`}}}));return x.forwardRef(function(i,c){const h=s(i),{className:g,component:d="div",disableGutters:n=!1,fixed:j=!1,maxWidth:C="lg",classes:M,...T}=h,m={...h,component:d,disableGutters:n,fixed:j,maxWidth:C},y=ue(m,r);return t.jsx(l,{as:d,ownerState:m,className:z(y.root,g),ref:c,...T})})}const he=pe({createStyledComponent:w("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,a)=>{const{ownerState:s}=e;return[a.root,a[`maxWidth${v(String(s.maxWidth))}`],s.fixed&&a.fixed,s.disableGutters&&a.disableGutters]}}),useThemeProps:e=>D({props:e,name:"MuiContainer"})});function ge(e){return U("MuiSwitch",e)}const u=A("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]),me=e=>{const{classes:a,edge:s,size:r,color:l,checked:p,disabled:o}=e,i={root:["root",s&&`edge${v(s)}`,`size${v(r)}`],switchBase:["switchBase",`color${v(l)}`,p&&"checked",o&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},c=F(i,ge,a);return{...a,...c}},xe=w("span",{name:"MuiSwitch",slot:"Root",overridesResolver:(e,a)=>{const{ownerState:s}=e;return[a.root,s.edge&&a[`edge${v(s.edge)}`],a[`size${v(s.size)}`]]}})({display:"inline-flex",width:34+12*2,height:14+12*2,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"},variants:[{props:{edge:"start"},style:{marginLeft:-8}},{props:{edge:"end"},style:{marginRight:-8}},{props:{size:"small"},style:{width:40,height:24,padding:7,[`& .${u.thumb}`]:{width:16,height:16},[`& .${u.switchBase}`]:{padding:4,[`&.${u.checked}`]:{transform:"translateX(16px)"}}}}]}),fe=w(ie,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:(e,a)=>{const{ownerState:s}=e;return[a.switchBase,{[`& .${u.input}`]:a.input},s.color!=="default"&&a[`color${v(s.color)}`]]}})(R(({theme:e})=>({position:"absolute",top:0,left:0,zIndex:1,color:e.vars?e.vars.palette.Switch.defaultColor:`${e.palette.mode==="light"?e.palette.common.white:e.palette.grey[300]}`,transition:e.transitions.create(["left","transform"],{duration:e.transitions.duration.shortest}),[`&.${u.checked}`]:{transform:"translateX(20px)"},[`&.${u.disabled}`]:{color:e.vars?e.vars.palette.Switch.defaultDisabledColor:`${e.palette.mode==="light"?e.palette.grey[100]:e.palette.grey[600]}`},[`&.${u.checked} + .${u.track}`]:{opacity:.5},[`&.${u.disabled} + .${u.track}`]:{opacity:e.vars?e.vars.opacity.switchTrackDisabled:`${e.palette.mode==="light"?.12:.2}`},[`& .${u.input}`]:{left:"-100%",width:"300%"}})),R(({theme:e})=>({"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:I(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},variants:[...Object.entries(e.palette).filter(L(["light"])).map(([a])=>({props:{color:a},style:{[`&.${u.checked}`]:{color:(e.vars||e).palette[a].main,"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette[a].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:I(e.palette[a].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${u.disabled}`]:{color:e.vars?e.vars.palette.Switch[`${a}DisabledColor`]:`${e.palette.mode==="light"?V(e.palette[a].main,.62):H(e.palette[a].main,.55)}`}},[`&.${u.checked} + .${u.track}`]:{backgroundColor:(e.vars||e).palette[a].main}}}))]}))),be=w("span",{name:"MuiSwitch",slot:"Track",overridesResolver:(e,a)=>a.track})(R(({theme:e})=>({height:"100%",width:"100%",borderRadius:14/2,zIndex:-1,transition:e.transitions.create(["opacity","background-color"],{duration:e.transitions.duration.shortest}),backgroundColor:e.vars?e.vars.palette.common.onBackground:`${e.palette.mode==="light"?e.palette.common.black:e.palette.common.white}`,opacity:e.vars?e.vars.opacity.switchTrack:`${e.palette.mode==="light"?.38:.3}`}))),ve=w("span",{name:"MuiSwitch",slot:"Thumb",overridesResolver:(e,a)=>a.thumb})(R(({theme:e})=>({boxShadow:(e.vars||e).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"}))),ye=x.forwardRef(function(a,s){const r=D({props:a,name:"MuiSwitch"}),{className:l,color:p="primary",edge:o=!1,size:i="medium",sx:c,...h}=r,g={...r,color:p,edge:o,size:i},d=me(g),n=t.jsx(ve,{className:d.thumb,ownerState:g});return t.jsxs(xe,{className:z(d.root,l),sx:c,ownerState:g,children:[t.jsx(fe,{type:"checkbox",icon:n,checkedIcon:n,ref:s,ownerState:g,...h,classes:{...d,root:d.switchBase}}),t.jsx(be,{className:d.track,ownerState:g})]})}),we=w(X)(({theme:e})=>({padding:e.spacing(3),marginBottom:e.spacing(3),backgroundColor:"#F8F9FA"})),Ce=({user:e})=>{const[a,s]=x.useState(!1),[r,l]=x.useState(!1),[p,o]=x.useState(!1),[i,c]=x.useState(null),h=G(),[g]=q(),[d]=K();x.useEffect(()=>{i&&M()},[i]);const n=()=>{s(!1)},j=()=>{s(!0)},C=m=>{c(m.target.files[0])},M=()=>{const m=new FormData;m.append("file",i),l(!0),g(m).unwrap().then(()=>{l(!1),h(S({message:"Profile image updated",severity:"success"})),n()}).catch(y=>{var B;l(!1);const $=((B=y==null?void 0:y.data)==null?void 0:B.message)||"Something went wrong";h(S({message:$,severity:"error"}))})},T=()=>{o(!0),d().unwrap().then(()=>{o(!1),h(S({message:"Profile image removed",severity:"success"})),n()}).catch(m=>{var $;o(!1);const y=(($=m==null?void 0:m.data)==null?void 0:$.message)||"Something went wrong";h(S({message:y,severity:"error"}))})};return t.jsxs(t.Fragment,{children:[t.jsx(we,{elevation:0,children:t.jsxs(b,{display:"flex",alignItems:"center",gap:2,children:[t.jsx(te,{src:e.profileImage,sx:{width:56,height:56}}),t.jsxs(b,{children:[t.jsx(f,{variant:"subtitle1",fontWeight:"medium",children:e.userName}),t.jsx(f,{variant:"body2",color:"text.secondary",children:e.fullName})]}),t.jsx(k,{variant:"contained",onClick:j,sx:{ml:"auto",textTransform:"none",borderRadius:2},children:"Change photo"})]})}),a&&t.jsx(ae,{open:a,onClose:n,"aria-labelledby":"unfollow-dialog-title",PaperProps:{style:{borderRadius:12,padding:"16px"}},children:t.jsxs(se,{sx:{textAlign:"center"},children:[t.jsx(b,{sx:{display:"flex",justifyContent:"center",mb:2},children:t.jsx(f,{variant:"h6",gutterBottom:!0,children:"Chage Profile Photo"})}),t.jsxs(b,{sx:{mt:3,mb:2},children:[t.jsx(P,{}),t.jsxs(k,{variant:"text",component:"label",fullWidth:!0,disabled:r||p,style:{color:"dodgerblue",fontWeight:"bold"},children:[r?"Uploading...":"Upload Photo",t.jsx("input",{type:"file",hidden:!0,accept:"image/*",onChange:C})]}),t.jsx(P,{}),t.jsx(k,{variant:"text",fullWidth:!0,disabled:r||p,style:{color:"palevioletred",fontWeight:"bold"},onClick:T,children:p?"Removing...":"Remove Current Photo"}),t.jsx(P,{}),t.jsx(k,{variant:"text",fullWidth:!0,disabled:r||p,style:{color:"gray"},onClick:n,children:"Cancel"}),t.jsx(P,{})]})]})})]})},Se=w(Y)(({theme:e})=>({"& .MuiOutlinedInput-root":{backgroundColor:"#fff"}})),je=()=>{const{user:e}=J(n=>n.auth),[a,s]=x.useState(e.bio||""),[r,l]=x.useState(e.gender||""),[p,o]=x.useState(e.accountType==="private"),[i,c]=x.useState(!1),h=G(),[g]=Q(),d=()=>{c(!0),g({bio:a,gender:r,accountType:p?"private":"public"}).unwrap().then(()=>{h(S({message:"Profile updated",severity:"success"}))}).catch(n=>{var C;const j=((C=n==null?void 0:n.data)==null?void 0:C.message)||"Something went wrong";h(S({message:j,severity:"error"}))}).finally(()=>{c(!1)})};return t.jsxs(he,{maxWidth:"md",sx:{py:4},children:[t.jsx(f,{variant:"h5",fontWeight:"bold",sx:{mb:4},children:"Edit profile"}),t.jsx(Ce,{user:e}),t.jsxs(b,{sx:{mb:2},children:[t.jsx(f,{variant:"subtitle1",fontWeight:"medium",sx:{mb:1},children:"Bio"}),t.jsx(Se,{fullWidth:!0,multiline:!0,disabled:i,rows:4,placeholder:"Bio",value:a,onChange:n=>s(n.target.value),inputProps:{maxLength:150},helperText:`${a.length} / 150`,FormHelperTextProps:{sx:{textAlign:"right"}}})]}),t.jsxs(b,{sx:{mb:2},children:[t.jsx(f,{variant:"subtitle1",fontWeight:"medium",sx:{mb:1},children:"Gender"}),t.jsx(Z,{fullWidth:!0,children:t.jsxs(_,{value:r,disabled:i,onChange:n=>l(n.target.value),sx:{backgroundColor:"#fff"},children:[t.jsx(W,{value:"female",children:"Female"}),t.jsx(W,{value:"male",children:"Male"}),t.jsx(W,{value:"custom",children:"Custom"}),t.jsx(W,{value:"other",children:"Prefer not to say"})]})}),t.jsx(f,{variant:"caption",color:"text.secondary",sx:{mt:1,display:"block"},children:"This won't be part of your public profile."})]}),t.jsxs(b,{sx:{mb:2},children:[t.jsx(f,{variant:"subtitle1",fontWeight:"medium",sx:{mb:1},children:"Private account"}),t.jsxs(b,{display:"flex",justifyContent:"space-between",alignItems:"flex-start",children:[t.jsx(f,{variant:"body2",color:"text.secondary",sx:{maxWidth:"80%"},children:"When your account is public, your profile and posts can be seen by anyone, on or off Vinstagram, even if they don't have an Vinstagram account. When your account is private, only the followers you approve can see what you share, including your photos or videos on hashtag and location pages, and your followers and following lists. Certain info on your profile, like your profile picture and username, is visible to everyone on and off Vinstagram."}),t.jsx(ye,{checked:p,disabled:i,onChange:n=>o(n.target.checked),color:"primary"})]})]}),t.jsx(b,{sx:{mb:2,display:"flex",justifyContent:"flex-end"},children:t.jsx(k,{variant:"contained",color:"primary",size:"large",disabled:i,sx:{textTransform:"none",borderRadius:2},onClick:d,children:"Submit"})})]})},Te=()=>t.jsx(oe,{children:t.jsx(je,{})});export{Te as default};
