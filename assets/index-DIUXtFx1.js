import{a as z,g as D,s as w,b as y,m as R,x as B,d as U,E,F as O,r as c,u as A,j as t,e as N,f as L,P as V,l as M,p as b,t as G}from"./index-xauWBcVr.js";import{a as X,b as H,c as q}from"./userApi-DpGwQIL2.js";import{B as x,T as m,a as S,e as J,F as K,S as Q}from"./TextField-D0vvW4Bl.js";import{A as Y,g as Z,h as _,D as $,i as ee,e as te}from"./index-YYnyLx-K.js";import{S as ae,M as P}from"./MenuItem-B8CWe03o.js";function se(e){return D("MuiSwitch",e)}const i=z("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]),oe=e=>{const{classes:a,edge:o,size:n,color:d,checked:l,disabled:u}=e,r={root:["root",o&&`edge${y(o)}`,`size${y(n)}`],switchBase:["switchBase",`color${y(d)}`,l&&"checked",u&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},f=L(r,se,a);return{...a,...f}},ie=w("span",{name:"MuiSwitch",slot:"Root",overridesResolver:(e,a)=>{const{ownerState:o}=e;return[a.root,o.edge&&a[`edge${y(o.edge)}`],a[`size${y(o.size)}`]]}})({display:"inline-flex",width:34+12*2,height:14+12*2,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"},variants:[{props:{edge:"start"},style:{marginLeft:-8}},{props:{edge:"end"},style:{marginRight:-8}},{props:{size:"small"},style:{width:40,height:24,padding:7,[`& .${i.thumb}`]:{width:16,height:16},[`& .${i.switchBase}`]:{padding:4,[`&.${i.checked}`]:{transform:"translateX(16px)"}}}}]}),ne=w(ae,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:(e,a)=>{const{ownerState:o}=e;return[a.switchBase,{[`& .${i.input}`]:a.input},o.color!=="default"&&a[`color${y(o.color)}`]]}})(R(({theme:e})=>({position:"absolute",top:0,left:0,zIndex:1,color:e.vars?e.vars.palette.Switch.defaultColor:`${e.palette.mode==="light"?e.palette.common.white:e.palette.grey[300]}`,transition:e.transitions.create(["left","transform"],{duration:e.transitions.duration.shortest}),[`&.${i.checked}`]:{transform:"translateX(20px)"},[`&.${i.disabled}`]:{color:e.vars?e.vars.palette.Switch.defaultDisabledColor:`${e.palette.mode==="light"?e.palette.grey[100]:e.palette.grey[600]}`},[`&.${i.checked} + .${i.track}`]:{opacity:.5},[`&.${i.disabled} + .${i.track}`]:{opacity:e.vars?e.vars.opacity.switchTrackDisabled:`${e.palette.mode==="light"?.12:.2}`},[`& .${i.input}`]:{left:"-100%",width:"300%"}})),R(({theme:e})=>({"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:B(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},variants:[...Object.entries(e.palette).filter(U(["light"])).map(([a])=>({props:{color:a},style:{[`&.${i.checked}`]:{color:(e.vars||e).palette[a].main,"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette[a].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:B(e.palette[a].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${i.disabled}`]:{color:e.vars?e.vars.palette.Switch[`${a}DisabledColor`]:`${e.palette.mode==="light"?E(e.palette[a].main,.62):O(e.palette[a].main,.55)}`}},[`&.${i.checked} + .${i.track}`]:{backgroundColor:(e.vars||e).palette[a].main}}}))]}))),re=w("span",{name:"MuiSwitch",slot:"Track",overridesResolver:(e,a)=>a.track})(R(({theme:e})=>({height:"100%",width:"100%",borderRadius:14/2,zIndex:-1,transition:e.transitions.create(["opacity","background-color"],{duration:e.transitions.duration.shortest}),backgroundColor:e.vars?e.vars.palette.common.onBackground:`${e.palette.mode==="light"?e.palette.common.black:e.palette.common.white}`,opacity:e.vars?e.vars.opacity.switchTrack:`${e.palette.mode==="light"?.38:.3}`}))),le=w("span",{name:"MuiSwitch",slot:"Thumb",overridesResolver:(e,a)=>a.thumb})(R(({theme:e})=>({boxShadow:(e.vars||e).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"}))),ce=c.forwardRef(function(a,o){const n=A({props:a,name:"MuiSwitch"}),{className:d,color:l="primary",edge:u=!1,size:r="medium",sx:f,...p}=n,h={...n,color:l,edge:u,size:r},g=oe(h),s=t.jsx(le,{className:g.thumb,ownerState:h});return t.jsxs(ie,{className:N(g.root,d),sx:f,ownerState:h,children:[t.jsx(ne,{type:"checkbox",icon:s,checkedIcon:s,ref:o,ownerState:h,...p,classes:{...g,root:g.switchBase}}),t.jsx(re,{className:g.track,ownerState:h})]})}),de=w(V)(({theme:e})=>({padding:e.spacing(3),marginBottom:e.spacing(3),backgroundColor:"#F8F9FA"})),ue=({user:e})=>{const[a,o]=c.useState(!1),[n,d]=c.useState(!1),[l,u]=c.useState(!1),[r,f]=c.useState(null),p=M(),[h]=X(),[g]=H();c.useEffect(()=>{r&&W()},[r]);const s=()=>{o(!1)},I=()=>{o(!0)},C=v=>{f(v.target.files[0])},W=()=>{const v=new FormData;v.append("file",r),d(!0),h(v).unwrap().then(()=>{d(!1),p(b({message:"Profile image updated",severity:"success"})),s()}).catch(j=>{var T;d(!1);const k=((T=j==null?void 0:j.data)==null?void 0:T.message)||"Something went wrong";p(b({message:k,severity:"error"}))})},F=()=>{u(!0),g().unwrap().then(()=>{u(!1),p(b({message:"Profile image removed",severity:"success"})),s()}).catch(v=>{var k;u(!1);const j=((k=v==null?void 0:v.data)==null?void 0:k.message)||"Something went wrong";p(b({message:j,severity:"error"}))})};return t.jsxs(t.Fragment,{children:[t.jsx(de,{elevation:0,children:t.jsxs(x,{display:"flex",alignItems:"center",gap:2,children:[t.jsx(Y,{src:e.profileImage,sx:{width:56,height:56}}),t.jsxs(x,{children:[t.jsx(m,{variant:"subtitle1",fontWeight:"medium",children:e.userName}),t.jsx(m,{variant:"body2",color:"text.secondary",children:e.fullName})]}),t.jsx(S,{variant:"contained",onClick:I,sx:{ml:"auto",textTransform:"none",borderRadius:2},children:"Change photo"})]})}),a&&t.jsx(Z,{open:a,onClose:s,"aria-labelledby":"unfollow-dialog-title",PaperProps:{style:{borderRadius:12,padding:"16px"}},children:t.jsxs(_,{sx:{textAlign:"center"},children:[t.jsx(x,{sx:{display:"flex",justifyContent:"center",mb:2},children:t.jsx(m,{variant:"h6",gutterBottom:!0,children:"Chage Profile Photo"})}),t.jsxs(x,{sx:{mt:3,mb:2},children:[t.jsx($,{}),t.jsxs(S,{variant:"text",component:"label",fullWidth:!0,disabled:n||l,style:{color:"dodgerblue",fontWeight:"bold"},children:[n?"Uploading...":"Upload Photo",t.jsx("input",{type:"file",hidden:!0,accept:"image/*",onChange:C})]}),t.jsx($,{}),t.jsx(S,{variant:"text",fullWidth:!0,disabled:n||l,style:{color:"palevioletred",fontWeight:"bold"},onClick:F,children:l?"Removing...":"Remove Current Photo"}),t.jsx($,{}),t.jsx(S,{variant:"text",fullWidth:!0,disabled:n||l,style:{color:"gray"},onClick:s,children:"Cancel"}),t.jsx($,{})]})]})})]})},pe=w(J)(({theme:e})=>({"& .MuiOutlinedInput-root":{backgroundColor:"#fff"}})),he=()=>{const{user:e}=G(s=>s.auth),[a,o]=c.useState(e.bio||""),[n,d]=c.useState(e.gender||""),[l,u]=c.useState(e.accountType==="private"),[r,f]=c.useState(!1),p=M(),[h]=q(),g=()=>{f(!0),h({bio:a,gender:n,accountType:l?"private":"public"}).unwrap().then(()=>{p(b({message:"Profile updated",severity:"success"}))}).catch(s=>{var C;const I=((C=s==null?void 0:s.data)==null?void 0:C.message)||"Something went wrong";p(b({message:I,severity:"error"}))}).finally(()=>{f(!1)})};return t.jsxs(ee,{maxWidth:"md",sx:{py:4},children:[t.jsx(m,{variant:"h5",fontWeight:"bold",sx:{mb:4},children:"Edit profile"}),t.jsx(ue,{user:e}),t.jsxs(x,{sx:{mb:2},children:[t.jsx(m,{variant:"subtitle1",fontWeight:"medium",sx:{mb:1},children:"Bio"}),t.jsx(pe,{fullWidth:!0,multiline:!0,disabled:r,rows:4,placeholder:"Bio",value:a,onChange:s=>o(s.target.value),inputProps:{maxLength:150},helperText:`${a.length} / 150`,FormHelperTextProps:{sx:{textAlign:"right"}}})]}),t.jsxs(x,{sx:{mb:2},children:[t.jsx(m,{variant:"subtitle1",fontWeight:"medium",sx:{mb:1},children:"Gender"}),t.jsx(K,{fullWidth:!0,children:t.jsxs(Q,{value:n,disabled:r,onChange:s=>d(s.target.value),sx:{backgroundColor:"#fff"},children:[t.jsx(P,{value:"female",children:"Female"}),t.jsx(P,{value:"male",children:"Male"}),t.jsx(P,{value:"custom",children:"Custom"}),t.jsx(P,{value:"other",children:"Prefer not to say"})]})}),t.jsx(m,{variant:"caption",color:"text.secondary",sx:{mt:1,display:"block"},children:"This won't be part of your public profile."})]}),t.jsxs(x,{sx:{mb:2},children:[t.jsx(m,{variant:"subtitle1",fontWeight:"medium",sx:{mb:1},children:"Private account"}),t.jsxs(x,{display:"flex",justifyContent:"space-between",alignItems:"flex-start",children:[t.jsx(m,{variant:"body2",color:"text.secondary",sx:{maxWidth:"80%"},children:"When your account is public, your profile and posts can be seen by anyone, on or off Vinstagram, even if they don't have an Vinstagram account. When your account is private, only the followers you approve can see what you share, including your photos or videos on hashtag and location pages, and your followers and following lists. Certain info on your profile, like your profile picture and username, is visible to everyone on and off Vinstagram."}),t.jsx(ce,{checked:l,disabled:r,onChange:s=>u(s.target.checked),color:"primary"})]})]}),t.jsx(x,{sx:{mb:2,display:"flex",justifyContent:"flex-end"},children:t.jsx(S,{variant:"contained",color:"primary",size:"large",disabled:r,sx:{textTransform:"none",borderRadius:2},onClick:g,children:"Submit"})})]})},be=()=>t.jsx(te,{children:t.jsx(he,{})});export{be as default};
